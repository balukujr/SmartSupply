/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: jetty/9.3.3.v20150827
 * Generated at: 2018-05-20 21:16:26 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.views.tiles.order;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class scripts_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

final java.lang.String _jspx_method = request.getMethod();
if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
return;
}

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\r\n");
      out.write("    $(document).ready( function() {\r\n");
      out.write("\r\n");
      out.write("        jQuery(document).delegate('a.add-record', 'click', function(e) {\r\n");
      out.write("            e.preventDefault();\r\n");
      out.write("            var content = jQuery('#sample_table tr'),\r\n");
      out.write("                size = jQuery('#order_table >tbody >tr').length + 1,\r\n");
      out.write("                element = null,\r\n");
      out.write("                element = content.clone();\r\n");
      out.write("            var index =size - 1;\r\n");
      out.write("            element.find('#id_select_0').attr('name','products['+index +'].product.id');\r\n");
      out.write("            element.find('#id_quantity_0').attr('name','products['+index+'].quantity');\r\n");
      out.write("            element.find('#id_unitprice_0').attr('id','id_unitprice_' + size);\r\n");
      out.write("            element.find('#id_total_0').attr('id','id_total_' + size);\r\n");
      out.write("            element.find('#id_select_0').attr('id','id_select_' + size);\r\n");
      out.write("            element.find('#id_quantity_0').attr('id','id_quantity_' +size);\r\n");
      out.write("\r\n");
      out.write("            element.attr('id', 'rec-'+size);\r\n");
      out.write("            element.find('.delete-record').attr('data-id', size);\r\n");
      out.write("            element.appendTo('#order_table_body');\r\n");
      out.write("            element.find('.sn').html(size);\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        jQuery(document).delegate('a.delete-record', 'click', function(e) {\r\n");
      out.write("            e.preventDefault();\r\n");
      out.write("            var didConfirm = confirm(\"Are you sure You want to delete\");\r\n");
      out.write("            if (didConfirm == true) {\r\n");
      out.write("                var id = jQuery(this).attr('data-id');\r\n");
      out.write("                var targetDiv = jQuery(this).attr('targetDiv');\r\n");
      out.write("                jQuery('#rec-' + id).remove();\r\n");
      out.write("                //regnerate index number on table\r\n");
      out.write("\r\n");
      out.write("                jQuery('#order_table_body >tr').each(function(index) {\r\n");
      out.write("                    var i=index+1;\r\n");
      out.write("                    //alert(index);\r\n");
      out.write("                    //$(this).find('span.sn').html(index-1);\r\n");
      out.write("                    $(this).attr('id','rec-' + i);\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                jQuery('#order_table_body >tr').each(function(index) {\r\n");
      out.write("                    var i=index+1;\r\n");
      out.write("\r\n");
      out.write("                    $(this).find('td:first').find('select').attr('name','products['+index +'].product.id');\r\n");
      out.write("                    $(this).find('td:first').find('select').attr('id','id_select_' + i);\r\n");
      out.write("                    $(this).find('td:nth-child(2)').find('input').attr('name','products['+index+'].quantity');\r\n");
      out.write("                    $(this).find('td:nth-child(2)').find('input').attr('id','id_quantity_' + i);\r\n");
      out.write("                    $(this).find('td:nth-child(3)').find('input').attr('name','order['+index +']');\r\n");
      out.write("                    $(this).find('td:nth-child(3)').find('input').attr('id','id_unitprice_' + i);\r\n");
      out.write("                    $(this).find('td:nth-child(4)').find('input').attr('name','total_amount['+index+']');\r\n");
      out.write("                    $(this).find('td:nth-child(4)').find('input').attr('id','id_total_' + i);\r\n");
      out.write("                    $(this).find('td:nth-child(5)').find('.delete-record').attr('data-id',i);\r\n");
      out.write("\r\n");
      out.write("//                    $(this).find('td').each (function() {\r\n");
      out.write("//                        $(this).find('')\r\n");
      out.write("//                        $(this).find('#id_select').attr('name','products['+index+'].product.id');\r\n");
      out.write("//                        $(this).find('#id_quantity').attr('name','products['+index+'].quantity');\r\n");
      out.write("//                        // do your cool stuff\r\n");
      out.write("//                    });\r\n");
      out.write("\r\n");
      out.write("                });\r\n");
      out.write("                return true;\r\n");
      out.write("            } else {\r\n");
      out.write("                return false;\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        jQuery(document).delegate('select.product-select', 'change', function(e)\r\n");
      out.write("         {\r\n");
      out.write("\r\n");
      out.write("//            console.log($(this).val());\r\n");
      out.write("            var option_id = $(this).val();\r\n");
      out.write("//            extract row id no from id of select\r\n");
      out.write("            var x = $(this).attr('id');\r\n");
      out.write("            var stringLength = x.length;\r\n");
      out.write("            var indexvalue =x.charAt(stringLength - 1);\r\n");
      out.write("            //id of input value to set unitprice\r\n");
      out.write("            var selct_value_to_change_id = 'id_unitprice_' +indexvalue;\r\n");
      out.write("            var unit_price =$('#' + option_id).val();\r\n");
      out.write("            $('#' + selct_value_to_change_id).attr('value',unit_price);\r\n");
      out.write("            //$('#id_total_1').attr('value',unit_price);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("//            console.log(unit_price);\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        jQuery(document).delegate('input.amount_calc', 'change', function(e)\r\n");
      out.write("        {\r\n");
      out.write("            //console.log($(this).val());\r\n");
      out.write("            var item_qnty = $(this).val();\r\n");
      out.write("            var x = $(this).attr('id');\r\n");
      out.write("            var stringLength = x.length;\r\n");
      out.write("            var indexvalue =x.charAt(stringLength - 1);\r\n");
      out.write("\r\n");
      out.write("//            getting product id that was selected\r\n");
      out.write("            var product_id = $('#id_select_' + indexvalue).val();\r\n");
      out.write("            var stck_quantity = $('.stock_quantity').find('#' + product_id).val();\r\n");
      out.write("            console.log(stck_quantity);\r\n");
      out.write("            if(stck_quantity >= item_qnty){\r\n");
      out.write("                //id of input value to set unitprice\r\n");
      out.write("                var total_id = 'id_total_' + indexvalue;\r\n");
      out.write("                var unit_price = $('#id_unitprice_' + indexvalue).val();\r\n");
      out.write("                var item_total = unit_price * item_qnty;\r\n");
      out.write("                $('#' + total_id).attr('value', item_total);\r\n");
      out.write("                compute_total_amount_for_Order();\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            else {\r\n");
      out.write("                window.alert(\"Quantity not in stock.\" +\r\n");
      out.write("                    \"Please make sure it's\" +  \" \" +stck_quantity +\"and below\");\r\n");
      out.write("                $('#id_quantity_'+ indexvalue).focus();\r\n");
      out.write("\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    function refresh_row(some_vlaue){\r\n");
      out.write("        var quantity = $('#rec_' + some_vlaue).find('#id_quantity_' + some_vlaue).val();\r\n");
      out.write("        var unitprice = $('#rec_' + some_vlaue).find('#id_unitprice_' + some_vlaue).val();\r\n");
      out.write("        var total = quantity * unitprice;\r\n");
      out.write("        $('#id_total_' + some_vlaue).attr('value',total);\r\n");
      out.write("//        console.log('yes i did it');\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function compute_total_amount_for_Order() {\r\n");
      out.write("        var total_amt =parseFloat(0.0);\r\n");
      out.write("        jQuery('#order_table_body >tr').each(function(index) {\r\n");
      out.write("            var i=index+1;\r\n");
      out.write("\r\n");
      out.write("            var index_value = parseFloat($(this).find('#id_total_'+ i).val());\r\n");
      out.write("            total_amt =total_amt + index_value ;\r\n");
      out.write("            $('#final_amount').attr('value',total_amt);\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("//    $('#').click(function (e) {\r\n");
      out.write("//        var form = $('#myform');\r\n");
      out.write("//        e.preventDefault();\r\n");
      out.write("//        var TableData;\r\n");
      out.write("//        TableData = storeTblValues();\r\n");
      out.write("//        //TableData = $.toJSON(TableData);\r\n");
      out.write("//        TableData = JSON.stringify({\r\n");
      out.write("//\r\n");
      out.write("//            'TableData' : TableData\r\n");
      out.write("//\r\n");
      out.write("//        });\r\n");
      out.write("//        console.log(TableData);\r\n");
      out.write("//        $.ajax({\r\n");
      out.write("//            headers: {\r\n");
      out.write("//                'Accept': 'application/json',\r\n");
      out.write("//                'Content-Type': 'application/json'\r\n");
      out.write("//            },\r\n");
      out.write("//            type: \"POST\",\r\n");
      out.write("//            url: form.attr('action'),\r\n");
      out.write("//            contentType:\"application/json\",\r\n");
      out.write("//            data: JSON.stringify({\r\n");
      out.write("//\r\n");
      out.write("//                'TableData' : TableData\r\n");
      out.write("//\r\n");
      out.write("//            }),\r\n");
      out.write("//            success: function(data){\r\n");
      out.write("//                alert('Success');\r\n");
      out.write("//\r\n");
      out.write("//            },\r\n");
      out.write("//            error: function (e) {\r\n");
      out.write("//                alert(\"Error: \" + e);\r\n");
      out.write("//            }\r\n");
      out.write("//        });\r\n");
      out.write("//    });\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    function storeTblValues() {\r\n");
      out.write("        var TableData = new Array();\r\n");
      out.write("        $('#order_table tr').each(function (row, tr) {\r\n");
      out.write("            TableData[row] = {\r\n");
      out.write("                \"product_id\": $(tr).find('td:eq(0)').text()\r\n");
      out.write("                , \"quantity\": $(tr).find('td:eq(1)').text()\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("        TableData.shift();  // first row is the table header - so remove\r\n");
      out.write("        return TableData;\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</script>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
